<!DOCTYPE html>
{% load static %}
{% load define_action %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Index</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"
          integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"
          crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'css/main.css'%}" type="text/css">
    <link rel="stylesheet" href="{% static 'css/white.css'%}" type="text/css" class="theme">
    <style>
        .tab {
    overflow: hidden;
    border: 1px solid #ccc;
    background-color: #f1f1f1;
}

/* Style the buttons that are used to open the tab content */
.tab button {
    background-color: inherit;
    float: left;
    border: none;
    outline: none;
    cursor: pointer;
    padding: 14px 16px;
    transition: 0.3s;
}

/* Change background color of buttons on hover */
.tab button:hover {
    background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
    background-color: #ccc;
}

/* Style the tab content */
.tab-content {
    display: none;
    border: 1px solid #ccc;
    border-top: none;
    padding-top:40px;
    justify-content: space-around;
}
    </style>
</head>
<body>
    <div id="header">
        <p id="logo" style="margin-left: 5%"><a href="/library/">NationalLib</a></p>
    <ul style="font-size: 22px">
        {% if user.is_authenticated%}
            <li style="margin-left: 75%;"><a href="{% url 'profile' %}">Мои закладки</a></li> | <a href="{% url 'logout' %}"> Выход</a>
        {%else%}
            <li style="margin-left: 75%;"></li><a href="{% url 'login' %}">Вход</a> | <a href="{% url 'registration' %}"> Регистрация</a>
        {% endif %}
    </ul>
<form class="" action="{%url 'search' %}" method="post" >
            <div class="wrap">
                <input type="text" class="input" name="search_field" value="" method='POST'
                       placeholder="Search course" required>
                <i style="display:inline;" class="fas fa-search" aria-hidden="true"></i>
                <div>
                    <div class="searchCriteries">
                        <p style="display: inline;">
                            <input name="type" type="radio" value="by_name" id="contactChoice1">Книга</p>
                    </div>
                    <div class="searchCriteries">
                        <p style="display: inline;">
                            <input name="type" type="radio" value="by_author" id="contactChoice2">Автор</p>
                    </div>
                    <div class="searchCriteries">
                        <p style="display: inline;">
                            <input name="type" type="radio" value="by_country" id="contactChoice3" checked>Страна</p>
                    </div>
                    <div class="searchCriteries">
                        <p style="display: inline;">
                            <input name="type" type="radio" value="by_publisher" id="contactChoice4" checked>Издатель</p>
                    </div>
                    <div class="searchCriteries">
                        <p style="display: inline;">
                            <input name="type" type="radio" value="by_fulltext" checked>Текст</p>
                    </div>
            </div>

        </div>
            {% csrf_token %}
    </form>

</div>

    <div class="main" style="min-height: 600px;">

        <div class="tab">
            <button class="tablinks" onclick="openCity(event, 'allBooks')" id="defaultOpen">Все</button>
            <button class="tablinks" onclick="openCity(event, 'readingBooks')" >Читаю</button>
            <button class="tablinks" onclick="openCity(event, 'futureBooks')">В планах</button>
            <button class="tablinks" onclick="openCity(event, 'doneBooks')">Прочитано</button>
            <button class="tablinks" onclick="openCity(event, 'favouriteBooks')">Любимое</button>
        </div>

        <div id="allBooks" class="tab-content">
            <div style="max-width: 100%">
                <div style="margin:auto;" class="bookAndLastPage">

                    {% for book in books %}
                        <div style="display: flex; justify-content: flex-start;">
                        {% for object in book %}

                            {% if forloop.counter == 1 %}
                                <div class="bookTemplate">
                        <div class="bookPic" href="/library/book/{{object.ISBN.pk}}" style="background-image: url('{{media_url}}{{object.ISBN.book_img}}');
                            background-size: cover;
                            background-position: center center;">
                        </div>
                        <p class="bookName"><a href="/library/book/{{object.ISBN.pk}}">{{object.ISBN.name}}</a></p>
                    </div>
                            {% endif %}

                            {% if forloop.counter == 2 and object != 0%}
                                <div style=" max-width:700px;display:flex; flex-wrap:wrap;margin-left:20px; word-wrap: break-word;">
                                    <label style="font-size:20px; margin-top: 180px;">
                                        <a href="/library/paper_page/{{object.paper_id.pk}}">
                                            Последная прочитаная страница {{object.paper_id.paper_count}}
                                        </a>
                                    </label>
                                </div>
                            {% endif %}
                        {% endfor %}
                        </div>
                    {% endfor %}

                </div>

            </div>

        </div>

        <div id="readingBooks" class="tab-content">
            <div style="max-width: 100%">
                <div style="margin:auto;" class="bookAndLastPage">

                    {% for book in books %}
                        <div style="display: flex; justify-content: flex-start;">
                        {% for object in book %}
                            {% if forloop.counter == 1%}
                                {% if object.type == "Читаю"%}
                                    <div class="bookTemplate">
                                         <div class="bookPic" href="/library/book/{{object.ISBN.pk}}" style="background-image: url('{{media_url}}{{object.ISBN.book_img}}');
                                background-size: cover;
                                background-position: center center;">
                                         </div>
                                    <p class="bookName"><a href="/library/book/{{object.ISBN.pk}}">{{object.ISBN.name}}</a></p>
                                    </div>
                                    {% define "asd" as action %}
                                {% endif %}
                            {% endif %}
                            {% if action%}
                                {% if forloop.counter == 2 and object != 0%}
                                    <div style=" max-width:700px;display:flex; flex-wrap:wrap;margin-left:20px; word-wrap: break-word;">
                                        <label style="font-size:20px; margin-top: 180px;">
                                            <a href="/library/paper_page/{{object.paper_id.pk}}">
                                                Последная прочитаная страница {{object.paper_id.paper_count}}
                                            </a>
                                        </label>
                                    </div>
                                {% endif %}
                            {% endif %}
                        {% endfor %}
                        </div>
                    {% endfor %}

                </div>

            </div>

        </div>

        <div id="futureBooks" class="tab-content">
            <div style="max-width: 100%">
                <div style="margin:auto;" class="bookAndLastPage">

                    {% for book in books %}
                        <div style="display: flex; justify-content: flex-start;">
                        {% for object in book %}
                            {% if forloop.counter == 1 and object.type == "В планах"%}
                                    <div class="bookTemplate">
                            <div class="bookPic" href="/library/book/{{object.ISBN.pk}}" style="background-image: url('{{media_url}}{{object.ISBN.book_img}}');
                                background-size: cover;
                                background-position: center center;">
                            </div>
                            <p class="bookName"><a href="/library/book/{{object.ISBN.pk}}">{{object.ISBN.name}}</a></p>
                        </div>
                                {% define "asd" as action %}
                                {% endif %}
                            {% if action%}
                                {% if forloop.counter == 2 and object != 0%}
                                    <div style=" max-width:700px;display:flex; flex-wrap:wrap;margin-left:20px; word-wrap: break-word;">
                                        <label style="font-size:20px; margin-top: 180px;">
                                            <a href="/library/paper_page/{{object.paper_id.pk}}">
                                                Последная прочитаная страница {{object.paper_id.paper_count}}
                                            </a>
                                        </label>
                                    </div>
                                {% endif %}
                            {% endif %}
                        {% endfor %}
                        </div>
                    {% endfor %}

                </div>

            </div>

        </div>

        <div id="doneBooks" class="tab-content">
            <div style="max-width: 100%">
                <div style="margin:auto;" class="bookAndLastPage">

                    {% for book in books %}
                        <div style="display: flex; justify-content: flex-start;">
                        {% for object in book %}

                            {% if forloop.counter == 1 and object.type == "Прочитано"%}
                                    <div class="bookTemplate">
                            <div class="bookPic" href="/library/book/{{object.ISBN.pk}}" style="background-image: url('{{media_url}}{{object.ISBN.book_img}}');
                                background-size: cover;
                                background-position: center center;">
                            </div>
                            <p class="bookName"><a href="/library/book/{{object.ISBN.pk}}">{{object.ISBN.name}}</a></p>
                        </div>
                                {% define "asd" as action %}
                                {% endif %}
                            {% if action%}

                                {% if forloop.counter == 2 and object != 0%}
                                    <div style=" max-width:700px;display:flex; flex-wrap:wrap;margin-left:20px; word-wrap: break-word;">
                                        <label style="font-size:20px; margin-top: 180px;">
                                            <a href="/library/paper_page/{{object.paper_id.pk}}">
                                                Последная прочитаная страница {{object.paper_id.paper_count}}
                                            </a>
                                        </label>
                                    </div>
                                {% endif %}
                            {% endif %}
                        {% endfor %}
                        </div>
                    {% endfor %}

                </div>

            </div>

        </div>

        <div id="favouriteBooks" class="tab-content">
            <div style="max-width: 100%">
                <div style="margin:auto;" class="bookAndLastPage">

                    {% for book in books %}
                        <div style="display: flex; justify-content: flex-start;">
                        {% for object in book %}

                            {% if forloop.counter == 1 and object.type == "Любимое"%}
                                    <div class="bookTemplate">
                            <div class="bookPic" href="/library/book/{{object.ISBN.pk}}" style="background-image: url('{{media_url}}{{object.ISBN.book_img}}');
                                background-size: cover;
                                background-position: center center;">
                            </div>
                            <p class="bookName"><a href="/library/book/{{object.ISBN.pk}}">{{object.ISBN.name}}</a></p>
                        </div>
                                {% define "asd" as action %}
                                {% endif %}
                            {% if action%}

                                {% if forloop.counter == 2 and object != 0%}
                                    <div style=" max-width:700px;display:flex; flex-wrap:wrap;margin-left:20px; word-wrap: break-word;">
                                        <label style="font-size:20px; margin-top: 180px;">
                                            <a href="/library/paper_page/{{object.paper_id.pk}}">
                                                Последная прочитаная страница {{object.paper_id.paper_count}}
                                            </a>
                                        </label>
                                    </div>
                                {% endif %}
                            {% endif %}
                        {% endfor %}
                        </div>
                    {% endfor %}

                </div>

            </div>

        </div>


    </div>

<footer>
    <p id="themeText">Тема
    <button id="darkTheme" disabled="disabled">T</button>
    <button id="whiteTheme" disabled="disabled">T</button>
    </p>
</footer>

<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
<script src="{% static 'js/lib.js'%}"></script>
<script>

    function openCity(evt, cityName) {
    // Declare all variables
    var i, tabcontent, tablinks;

    // Get all elements with class="tabcontent" and hide them
    tabcontent = document.getElementsByClassName("tab-content");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }

    // Get all elements with class="tablinks" and remove the class "active"
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }

    // Show the current tab, and add an "active" class to the button that opened the tab
    document.getElementById(cityName).style.display = "flex";
    evt.currentTarget.className += " active";
}

    document.getElementById("defaultOpen").click();
</script>

</body>
</html>